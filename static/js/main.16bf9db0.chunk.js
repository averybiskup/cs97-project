(this.webpackJsonpcoursereview=this.webpackJsonpcoursereview||[]).push([[0],{13:function(e,t,n){},31:function(e,t,n){},40:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),s=n.n(a),c=n(32),o=n.n(c),i=(n(40),n(2)),u=n.n(i),l=n(5),d=n(6),j=(n(13),n(8)),p=function(e){var t="/cs97-project/course/"+e.course_id;return Object(r.jsxs)("div",{className:"course-card",children:[Object(r.jsx)("div",{children:Object(r.jsx)("img",{className:"image_id",src:"https://media.geeksforgeeks.org/wp-content/cdn-uploads/titleShadow-1024x341.png",alt:"test image"})}),Object(r.jsx)("div",{className:"course_title",children:e.name}),Object(r.jsx)(j.b,{className:"course_link",to:t,children:"Course Page"})]})},h=n(34),b=function(e){var t=Object(a.useState)(""),n=Object(d.a)(t,2),s=n[0],c=n[1],o=e.courses,i=function(e,t){if(!t)return e;var n=new h.a("id");n.addIndex("title"),n.addIndex("tags"),n.addDocuments(e);var r=n.search(t);return e.filter((function(e){return r.includes(e)}))}(Object.keys(o).map((function(e){return o[e]})),s);return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"top_bar",children:[Object(r.jsx)(j.b,{className:"login",to:"/cs97-project/login",children:"Login"}),Object(r.jsx)("a",{class:"title",children:"WEBPAGE TITLE"}),Object(r.jsx)("a",{children:"Add Course"}),Object(r.jsx)("a",{children:"About Us"})]}),Object(r.jsxs)("div",{className:"middle-page",children:[Object(r.jsx)("div",{class:"middle-text",children:"Search for Courses Here"}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"text",class:"middle-input",id:"course-search",placeholder:"Search for Course...",name:"s",onChange:function(e){return c(e.target.value)}})]}),Object(r.jsx)("div",{id:"wrapper",children:i.map((function(e){return Object(r.jsx)(p,{name:e.title,course_id:e.id},e.id)}))})]})},g=n(7),m=n.n(g),O=function(){return{0:{id:0,title:"React Native",author:"Joe",tags:["React","React Native"],rating:50,reviews:{0:{id:0,course_id:0,body:"This is a great course!",author:"Anon",title:"Awesome course!",rating:100},1:{id:1,course_id:0,body:"This is a great course!",author:"Anon",title:"Awesome course!",rating:100}}},1:{id:1,title:"Python",author:"Spud",tags:["Python"],rating:78,reviews:{1:{id:1,course_id:1,body:"This is a great course!",author:"Anon",title:"Awesome course!",rating:100}}},2:{id:2,title:"Node.js",author:"Natalie",tags:["Node","Node.js","Javascript"],rating:86,reviews:{2:{id:2,course_id:2,body:"This is a great course!",author:"Anon",title:"Awesome course!",rating:100}}}}},v=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/getcourses").then((function(e){return console.log("Got data"),window.localStorage.clear(),window.localStorage.setItem("courses",JSON.stringify(e.data)),e.data})).catch((function(e){return console.log("Server error"),window.localStorage.clear(),window.localStorage.setItem("courses",JSON.stringify(O())),O()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={course_id:t,new_rating:n},a=JSON.stringify(r),console.log("Updating course"),e.next=5,m.a.post("/api/updatecourse",a,{headers:{"Content-Type":"application/json"}}).then((function(e){return console.log("Course updated"),e.data})).catch((function(e){console.log(e),window.alert("Error updating rating")}));case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/fetchreviews/"+t).then((function(e){var n=JSON.parse(window.localStorage.getItem("courses"));n[t]=e.data;var r=e.data.reviews;console.log("Updating reviews");var a=0;return Object.keys(r).map((function(e){a+=Number(r[e].rating)})),f(t,a/5),window.localStorage.clear(),window.localStorage.setItem("courses",JSON.stringify(n)),e.data})).catch((function(e){console.log(e),window.alert("Error fetching reviews")}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(a.useState)(!0),t=Object(d.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)({}),o=Object(d.a)(c,2),i=o[0],j=o[1];return Object(a.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,j(t),s(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),n?Object(r.jsx)("div",{body:!0}):Object(r.jsx)("div",{className:"App",children:Object(r.jsx)("header",{className:"App-header",children:Object(r.jsx)(b,{courses:i})})})},N=n(3),y=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r,a,s){var c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={course_id:t,body:n,author:r,title:a,rating:s},o=JSON.stringify(c),console.log("Posting review"),e.next=5,m.a.post("/api/postreview",o,{headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e.status)})).catch((function(e){console.log(e.response.data),window.alert("Post failed. Server is probably down. "+e)}));case 5:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a,s){return e.apply(this,arguments)}}(),S=function(e){return Object(r.jsxs)("div",{className:"review",children:[Object(r.jsxs)("div",{className:"title",children:["Title: ",e.review.title]}),Object(r.jsxs)("div",{className:"author",children:["Author: ",e.review.author]}),Object(r.jsxs)("div",{className:"rating",children:["Rating: ",e.review.rating]}),Object(r.jsxs)("div",{className:"body",children:["Body:",Object(r.jsx)("textarea",{id:"body",name:"w3review",rows:"4",cols:"80",children:e.review.body})]})]})},C=function(e){var t=Object(a.useState)("Anon"),n=Object(d.a)(t,2),s=n[0],c=n[1],o=Object(a.useState)(""),i=Object(d.a)(o,2),u=i[0],l=i[1],j=Object(a.useState)(""),p=Object(d.a)(j,2),h=p[0],b=p[1],g=Object(a.useState)(0),m=Object(d.a)(g,2),O=m[0],v=m[1],f=e.course.id;return Object(r.jsx)("div",{className:"create-review",children:Object(r.jsxs)("form",{id:"createreview",onSubmit:function(t){(function(e,t,n,r,a,s,c){if(e.preventDefault(),r.length<=0)alert("No title");else if(a.length<=0)alert("No body");else{if(0!=s)return 0==n.length&&(n="Anon"),y(t,a,n,r,s),c("Preparing review..."),x(t),setTimeout((function(){c("Review added!")}),5e3),!0;alert("Rating can not be 0")}return!1})(t,f,s,u,h,O,e.updateMessage)&&(c("Anon"),l(""),b(""),v(0))},children:[Object(r.jsx)("input",{type:"text",name:"author",placeholder:"name",value:s,onChange:function(e){return c(e.target.value)}}),Object(r.jsx)("input",{type:"text",name:"title",placeholder:"title (required)",value:u,onChange:function(e){return l(e.target.value)}}),Object(r.jsx)("input",{type:"text",name:"body",placeholder:"review (required)",value:h,onChange:function(e){return b(e.target.value)}}),Object(r.jsxs)("select",{value:O,onChange:function(e){return v(e.target.value)},children:[Object(r.jsx)("option",{children:"0"}),Object(r.jsx)("option",{children:"1"}),Object(r.jsx)("option",{children:"2"}),Object(r.jsx)("option",{children:"3"}),Object(r.jsx)("option",{children:"4"}),Object(r.jsx)("option",{children:"5"})]}),Object(r.jsx)("input",{type:"submit",value:"Submit"})]})})},k=function(e){var t=JSON.parse(window.localStorage.getItem("courses"))[e.loc].reviews;if(!t)return Object(r.jsx)("div",{children:"Course has no reviews."});var n=Object.keys(t).map((function(e){return t[e]}));return Object(r.jsxs)("div",{className:"reviews",children:[Object(r.jsx)("div",{children:e.message}),Object(r.jsx)("h1",{children:"Reviews:"}),n.map((function(e){return Object(r.jsx)(S,{review:e},e.id)}))]})},A=function(e){var t=Object(a.useState)(""),n=Object(d.a)(t,2),s=n[0],c=n[1],o=Object(N.f)(),i=o.pathname.split("/")[o.pathname.split("/").length-1];if(null===window.localStorage.getItem("courses"))return Object(r.jsx)("div",{children:"Something went wrong"});var u=JSON.parse(window.localStorage.getItem("courses"))[i];return Object(r.jsxs)("div",{className:"course-page",children:[Object(r.jsx)(j.b,{className:"login",to:"/cs97-project/login",children:"Login"}),Object(r.jsx)(j.b,{className:"home-button",to:"/cs97-project/",children:"Home"}),Object(r.jsxs)("div",{className:"title",children:["Title: ",u.title]}),Object(r.jsxs)("div",{className:"author",children:["Author: ",u.author]}),Object(r.jsxs)("div",{className:"rating",children:["Rating: ",u.course_rating]}),Object(r.jsxs)("div",{children:[" Submit a review:",Object(r.jsx)(C,{course:u,updateMessage:c})]}),Object(r.jsx)("div",{className:"review-cards",children:Object(r.jsx)(k,{loc:i,message:s})})]})},I=function(){return Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:function(){m.a.get("/api/addcourse")},children:"add course"})})},J=(n(31),n(16)),T=n.n(J),_=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={username:t,hash:n},a=JSON.stringify(r),e.next=4,m.a.post("/login",a,{headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e.status),200==e.status&&(window.localStorage.setItem("isAuthenticated",!0),window.localStorage.setItem("username",t),window.location.replace("/cs97-project"))})).catch((function(e){console.log(e.response.data),window.alert("Incorrect username or password.")}));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),o=Object(d.a)(c,2),i=o[0],u=o[1];return Object(r.jsx)("div",{className:"login-page",children:Object(r.jsxs)("form",{id:"login",onSubmit:function(e){!function(e,t,n){e.preventDefault(),t.length<=0?alert("No username"):n.length<=0?alert("No password"):_(t,T()(n))}(e,n,i),u("")},children:[Object(r.jsxs)("div",{className:"login-inputs",children:[Object(r.jsx)("input",{className:"username",type:"text",name:"username",placeholder:"username",value:n,onChange:function(e){return s(e.target.value)}}),Object(r.jsx)("input",{id:"password",className:"password",type:"text",name:"password",placeholder:"password",value:"*".repeat(i.length),onChange:function(e){return u(e.target.value)}})]}),Object(r.jsxs)("div",{className:"login-button-wrapper",children:[Object(r.jsxs)("div",{className:"hello",children:["Welcome back, ",Object(r.jsx)("span",{className:"hello-name",children:n})]}),Object(r.jsx)("input",{className:"login-button",type:"submit",value:"login"}),Object(r.jsxs)("div",{className:"login-extra-buttons",children:[Object(r.jsx)(j.b,{className:"signup",to:"/cs97-project/signup",children:"or sign up"}),Object(r.jsx)(j.b,{className:"home-button",to:"/cs97-project/",children:"Home"})]})]})]})})},E=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={username:t},JSON.stringify(n),e.next=4,m.a.get("/checkuser/"+t).then((function(e){return console.log(e.status),e})).catch((function(e){console.log(e.response.data),window.alert("Post failed. Server is probably down. "+e)}));case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={username:t,hash:n},a=JSON.stringify(r),e.next=4,m.a.post("/signup",a,{headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e.status),200==e.status&&window.location.replace("/cs97-project/login")})).catch((function(e){console.log(e.response.data),window.alert("Post failed. Server is probably down. "+e)}));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),o=Object(d.a)(c,2),i=o[0],p=o[1],h="#11"+(i.length.toString()+i.length.toString())+"11";return i.length>0&&i.length<10&&(document.getElementById("lower-bg").style.backgroundColor=h,document.getElementById("password").style.borderColor=h),Object(r.jsx)("div",{className:"signup-page",children:Object(r.jsxs)("form",{id:"signup",onSubmit:function(e){!function(e,t,n){e.preventDefault(),t.length<=0?alert("No username"):n.length<=0?alert("No password"):function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:e.sent.data?alert("User already exists"):R(t,T()(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(t)}(e,n,i),p("")},children:[Object(r.jsxs)("div",{className:"login-inputs",children:[Object(r.jsx)("input",{id:"username",className:"username",type:"text",name:"username",placeholder:"new username",value:n,onChange:function(e){return s(e.target.value)}}),Object(r.jsx)("input",{id:"password",className:"password",ype:"text",name:"password",placeholder:"new password",value:"*".repeat(i.length),onChange:function(e){return p(e.target.value)}})]}),Object(r.jsxs)("div",{id:"lower-bg",className:"login-button-wrapper",children:[Object(r.jsxs)("div",{className:"hello",children:["Welcome, ",Object(r.jsx)("span",{className:"hello-name",children:n})]}),Object(r.jsx)("input",{className:"login-button",type:"submit",value:"sign up"}),Object(r.jsxs)("div",{className:"login-extra-buttons",children:[Object(r.jsx)(j.b,{className:"login",to:"/cs97-project/login",children:"or login"}),Object(r.jsx)(j.b,{className:"home-button",to:"/cs97-project/",children:"Home"})]})]})]})})},D=function(){return Object(r.jsx)("div",{className:"Router",children:Object(r.jsx)(j.a,{children:Object(r.jsxs)(N.c,{children:[Object(r.jsx)(N.a,{exact:!0,path:"/cs97-project/",component:w}),Object(r.jsx)(N.a,{exact:!0,path:"/cs97-project/course/:id",component:A}),Object(r.jsx)(N.a,{exact:!0,path:"/cs97-project/addcourse",component:I}),Object(r.jsx)(N.a,{exact:!0,path:"/cs97-project/login",component:P}),Object(r.jsx)(N.a,{exact:!0,path:"/cs97-project/signup",component:B})]})})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};o.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(D,{})}),document.getElementById("root")),L()}},[[67,1,2]]]);
//# sourceMappingURL=main.16bf9db0.chunk.js.map